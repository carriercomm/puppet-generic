remote <%= peer_ip %> {
	exchange_mode main;
	certificate_type x509 "certs/<%= fqdn %>.pem" "private/<%= fqdn %>.key";
	verify_cert on;
	my_identifier asn1dn;
	peers_identifier asn1dn "<%= peer_asn1dn %>";
	ca_type x509 "<%= cafile %>";

	proposal {
		encryption_algorithm <%= phase1_enc %>;
		hash_algorithm <%= phase1_hash %>;
		authentication_method rsasig;
		dh_group <%= phase1_dh %>;
	}
}

<% localnet.each do |local| -%>
<% remotenet.each do |remote| -%>
sainfo address <%= local %> any address <%= remote %> any {
	pfs_group <%= phase2_dh %>;
	encryption_algorithm <%= phase2_enc %>;
	authentication_algorithm <%= phase2_auth %>;
	compression_algorithm deflate;
}

<% end -%>
<% end -%>
